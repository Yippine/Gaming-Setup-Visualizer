---
description: 
globs: 
alwaysApply: true
---
# 🚀 專案動態進度追蹤器

> **[META] 注意：** 作為 AI 協作者，我必須在每次與使用者互動後，審視並更新此檔案，以確保計畫永遠反映最新的對話進度和決策。

## 🎯 總體目標
為 IKEA FREDDE 電競桌，找出四條 VATTENSTEN LED 燈條的最佳佈置方案，並提供清晰、可執行的安裝指南，最終實現**可互動、帶有動態 RGB 特效的 3D 視覺化預覽**。



---

## 🗺️ 專案執行計畫 (Phased Plan)

### **第一階段：概念驗證 (快速草圖)**
- **目標**: 使用 Mermaid 圖表與文字描述，快速探索 2-3 個不同的佈置**概念**，以便在設計理念上達成共識。
- **產出**: 幾個不同風格的佈置方案（例如：氛圍模式、專注模式），包含簡化示意圖、優缺點分析與適用情境。

### **第二階段：3D 視覺化 (精密樣品)**
- **目標**: (可選) 在您從第一階段選定最喜歡的方案後，建立一個簡化的 3D 互動模型。
- **產出**: `index.html`, `style.css`, `script.js` 檔案，用以呈現可互動的 3D 書桌與燈光佈置預覽。

### **第三階段：互動與重構**
- **目標**: 將程式碼模組化，分離基礎場景與燈光方案，並建立 UI 介面以供切換。
- **產出**: 重構後的 `script.js`，以及帶有切換按鈕的 `index.html`。

### **第四階段：特效與優化 (Effect & Optimization)**
- **目標**: 實現動態燈光效果，並根據使用者回饋持續優化模型與程式碼。
- **產出**: 具有動態 RGB 燈效、最佳化燈條長度且視覺無誤的最終版 `script.js`。



---

## 📈 目前進度狀態

- **當前階段**: **第四階段：特效與優化**
- **已完成 (Done)**:
    - [x] **第一階段：概念驗證**
        - [x] 建立 `immersive-atmosphere-plan.md`
    - [x] **第二階段：3D 視覺化**
        - [x] 建立高擬真 FREDDE 書桌 3D 模型
        - [x] 完成「沉浸式氛圍方案」視覺化
    - [x] **第三階段： Bug 修復與重構準備**
        - [x] 修復牆壁穿透後燈光不可見的 Bug
        - [x] 在 `index.html` 中建立按鈕容器
- **下一步 (Next Up)**:
    - [x] **移除遮擋的背板**
        - [x] 從 `createDesk` 函式移除 `backPanel` 物件
    - [x] **優化燈條長度**
        - [x] 將總長度控制在 3 公尺內 (2x 1.1m + 2x 0.4m)
    - [x] **實現動態 RGB 特效**
        - [x] 引入 `THREE.Clock`
        - [x] 在 `animate` 函式中用 HSL 和時間偏移創造 "Color Wave" 特效
    - [ ] **重構程式碼 (延後)**
        - [ ] 將 `script.js` 拆分成 `main.js`, `desk.js`, `lighting.js`, `ui.js`
        - [ ] 建立 `js/` 目錄存放模組化檔案



---

## 📝 關鍵決策日誌 (Decision Log)

- **2024-XX-XX**: 使用者提出燈光動態化需求。決定新增「第四階段」，優先實現動態 RGB 特效、優化燈條長度並修復模型遮擋問題。原定的程式碼重構任務延後，待視覺效果完全達標後再進行。


- **2024-XX-XX**: 為了支援未來多種燈光方案的切換，決定重構程式碼，將基礎場景與燈光方案分離，並為此建立 UI 按鈕。